<!DOCTYPE html>
<html>
  <head>
   <script>
  // Function to get query string parameters from URL
  function getQueryStringValue(key) {
    return decodeURIComponent(window.location.search.replace(
      new RegExp("^(?:.*[&\\?]" + encodeURIComponent(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));
  }

  // Push key and value to the GTM data layer
  var key = getQueryStringValue('key');
  var value = getQueryStringValue('value');
  
  // Check if GTM is available and the key and value are defined
  if (typeof dataLayer !== 'undefined' && key && value) {
    dataLayer.push({
      'key': key,
      'value': value
    });
  }
</script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K4NG57N');</script>
<!-- End Google Tag Manager -->
    <title>Hello World</title>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K4NG57N"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <h1>Hello World</h1>
        <button id="apiButton">Send API Request!</button>
    <script>
  // Function to send API request
  function sendAPIRequest() {
    // Get the key and value from the GTM data layer
    var key = '{{key}}';
    var value = '{{value}}';

    // Construct the API URL with the query string parameters
    var apiUrl = 'https://httpbin.org/get?key=' + encodeURIComponent(key) + '&value=' + encodeURIComponent(value);

    // Send the GET request
    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        console.log(data);
      })
      .catch(error => {
        console.error('Error:', error);
      });
  }
</script>
  </body>
</html>
